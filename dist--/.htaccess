# Bật engine viết lại URL
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  
  # Quy tắc cho React Router:
  # Nếu request không phải là file thật (!-f) và không phải thư mục thật (!-d)
  # thì chuyển hướng tất cả về index.html để React xử lý routing
  RewriteRule ^index\.html$ - [L]
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  RewriteCond %{REQUEST_URI} !^/api\.php [NC]
  RewriteRule . /index.html [L]
</IfModule>

# Cấu hình PHP (Tăng giới hạn upload để đăng chương truyện nhiều ảnh)
# InfinityFree có thể chặn ghi đè php_value trong .htaccess, nếu lỗi 500 thì xóa đoạn dưới này đi.
<IfModule mod_php7.c>
  php_value upload_max_filesize 64M
  php_value post_max_size 64M
  php_value max_execution_time 300
  php_value max_input_time 300
</IfModule>

# Cho phép truy cập từ mọi nguồn (CORS) - Hỗ trợ thêm cho file tĩnh
<IfModule mod_headers.c>
    Header set Access-Control-Allow-Origin "*"
</IfModule>